<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professora Alice</title>
</head>

<body>
    <h2>Cadastro de notas da Prof. Alice</h2>
    Insira o nome do aluno <input type="text" name="" id="iptNome"><br>
    Insira a 1ª nota do aluno: <input type="number" name="" id="iptNota1"><br>
    Insira a 2ª nota do aluno: <input type="number" name="" id="iptNota2"><br>
    Insira a 3ª nota do aluno: <input type="number" name="" id="iptNota3"><br>
    <div id="divMsg"></div>
    <button onclick="validar()">Cadastrar</button><button onclick="listar()">Listar</button><br>
    <button onclick="mostrarAluno()">Aluno</button> <button onclick="media()">Mostrar média</button><br>
    <button onclick="maiorQue()">Notas maior que:</button><br>
    <div id="divResult"></div>
</body>
<script>
    var axNome = "";
    var axNota1 = 0;
    var axNota2 = 0;
    var axNota3 = 0;
    var vtNomesGerais = [];
    var vtrInformacoes = [];

    function validar() {
        axNome = iptNome.value;
        axNota1 = Number(iptNota1.value);
        axNota2 = Number(iptNota2.value);
        axNota3 = Number(iptNota3.value);
        var axDivMsg = "";
        var validado = false;

        if (iptNome.value == "" || axNome.length < 9 || vtNomesGerais.includes(axNome)) {
            axDivMsg += "<p>Insira um nome válido! (Maior que 9 caracteres e que não seja repetido)</p>";
            validado = true;
        } if (iptNota1.value == "" || axNota1 < 0 || axNota1 > 10) {
            axDivMsg += "<p>Insira a 1ª nota válida! (<b>Maior que 0</b> ou <b>Menor que 10</b>)</p>";
            validado = true;
        } if (iptNota2.value == "" || axNota2 < 0 || axNota2 > 10) {
            axDivMsg += "<p>Insira a 2ª nota válida! (<b>Maior que 0</b> ou <b>Menor que 10</b>)</p>";
            validado = true;
        } if (iptNota3.value == "" || axNota3 < 0 || axNota3 > 10) {
            axDivMsg += "<p>Insira a 3ª nota válida! (<b>Maior que 0</b> ou <b>Menor que 10</b>)</p>";
            validado = true;
        } if (validado == true) {
            divMsg.innerHTML = axDivMsg;
        } else {
            iptNome.value = "";
            iptNota1.value = "";
            iptNota2.value = "";
            iptNota3.value = "";
            divMsg.innerHTML = "";
            vtNomesGerais.push(axNome);
            cadastrar()
        }
    }
    function cadastrar() {

        var axMedia = Number((axNota1 + axNota2 + axNota3) / 3);

        Informacoes = {
            nome: axNome,
            nota1: axNota1,
            nota2: axNota2,
            nota3: axNota3,
            media: axMedia
        }

        vtrInformacoes.push(Informacoes);
    }

    function listar() {
        divResult.innerHTML = ``
    }

    function media() {
    if (vtrInformacoes.length === 0) {
        alert("Nenhum aluno cadastrado ainda.");
        return;
    }

    var axNomePrompt = prompt("A maior ou a menor média?");
    if (!axNomePrompt) return;

    var axVerificacao = axNomePrompt.toUpperCase();

    var axMediaMaior = vtrInformacoes[0].media;
    var axMediaMenor = vtrInformacoes[0].media;
    var indiceMaior = 0;
    var indiceMenor = 0;

    divResult.innerHTML = "";

    if (axVerificacao === "MAIOR") {

        for (let i = 1; i < vtrInformacoes.length; i++) {
            if (vtrInformacoes[i].media > axMediaMaior) {
                axMediaMaior = vtrInformacoes[i].media;
                indiceMaior = i;
            }
        }

        var aluno = vtrInformacoes[indiceMaior];

        divResult.innerHTML = `
            <p>
                Aluno: ${aluno.nome} –
                N1: ${aluno.nota1} –
                N2: ${aluno.nota2} –
                N3: ${aluno.nota3} –
                Média: ${aluno.media.toFixed(2)} –
                Maior média
            </p>
        `;
    }

    else if (axVerificacao === "MENOR") {

        for (let i = 1; i < vtrInformacoes.length; i++) {
            if (vtrInformacoes[i].media < axMediaMenor) {
                axMediaMenor = vtrInformacoes[i].media;
                indiceMenor = i;
            }
        }

        var aluno = vtrInformacoes[indiceMenor];

        divResult.innerHTML = `
            <p>
                Aluno: ${aluno.nome} –
                N1: ${aluno.nota1} –
                N2: ${aluno.nota2} –
                N3: ${aluno.nota3} –
                Média: ${aluno.media.toFixed(2)} –
                Menor média
            </p>
        `;
    }

    else {
        alert("Digite apenas MAIOR ou MENOR.");
    }
}
    function maiorQue() {
    if (vtrInformacoes.length === 0) {
        alert("Nenhum aluno cadastrado ainda.");
        return;
    }

    var axPrompt = prompt("Mostrar alunos com notas maiores que qual valor?");
    var limite = Number(axPrompt);

    divResult.innerHTML = "";

    var encontrou = false;

    for (let i = 0; i < vtrInformacoes.length; i++) {
        var aluno = vtrInformacoes[i];

        if (aluno.nota1 > limite || aluno.nota2 > limite || aluno.nota3 > limite) {
            encontrou = true;

            divResult.innerHTML += `
                <p>
                    Aluno: ${aluno.nome} –
                    N1: ${aluno.nota1} –
                    N2: ${aluno.nota2} –
                    N3: ${aluno.nota3} –
                    Média: ${aluno.media}
                </p>
            `;
        }
    }

    if (!encontrou) {
        divResult.innerHTML = "<p>Nenhum aluno possui nota maior que o valor informado.</p>";
    }
}

</script>

</html>